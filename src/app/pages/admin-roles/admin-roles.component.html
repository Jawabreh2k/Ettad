<div class="space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold text-[var(--color-text)]">Role Management</h1>
      <p class="text-sm text-[var(--color-text-muted)] mt-1">Manage roles and permissions</p>
    </div>
    <button
      (click)="onAddRole()"
      class="inline-flex items-center gap-2 px-4 py-2.5 bg-[var(--color-brand)] text-white rounded-lg hover:bg-[var(--color-brand-dark)] transition-colors"
    >
      <lucide-angular [img]="Plus" class="h-4 w-4"></lucide-angular>
      Add Role
    </button>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <app-card>
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm text-[var(--color-text-muted)]">Total Roles</p>
          <p class="text-2xl font-bold text-[var(--color-text)]">{{ getTotalRoles() }}</p>
        </div>
        <lucide-angular [img]="Shield" class="h-8 w-8 text-[var(--color-accent)]"></lucide-angular>
      </div>
    </app-card>

    <app-card>
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm text-[var(--color-text-muted)]">Active Roles</p>
          <p class="text-2xl font-bold text-[var(--color-text)]">{{ getActiveRolesCount() }}</p>
        </div>
        <lucide-angular [img]="Check" class="h-8 w-8 text-[var(--color-success)]"></lucide-angular>
      </div>
    </app-card>

    <app-card>
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm text-[var(--color-text-muted)]">System Status</p>
          <p class="text-2xl font-bold text-[var(--color-success)]">Operational</p>
        </div>
        <lucide-angular [img]="Settings" class="h-8 w-8 text-[var(--color-info)]"></lucide-angular>
      </div>
    </app-card>
  </div>

  <!-- Roles Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    <app-card *ngFor="let role of roles">
      <div class="space-y-4">
        <!-- Role Header -->
        <div class="flex items-start justify-between">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-lg bg-[var(--color-accent)]/10 flex items-center justify-center">
              <lucide-angular [img]="Shield" class="h-5 w-5 text-[var(--color-accent)]"></lucide-angular>
            </div>
            <div>
              <h3 class="font-semibold text-[var(--color-text)]">{{ role.name }}</h3>
              <div class="flex items-center gap-2 mt-1">
                <span *ngIf="role.isSuperAdmin" class="px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded">
                  Super Admin
                </span>
                <span *ngIf="role.isDefaultRole" class="px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">
                  Default
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex items-center gap-2 pt-4 border-t border-[var(--color-border)]">
          <button
            (click)="onEditRole(role)"
            class="flex-1 px-3 py-2 text-sm font-medium text-[var(--color-accent)] hover:bg-[var(--color-accent)]/10 rounded-lg transition-colors"
          >
            <lucide-angular [img]="Edit" class="h-4 w-4 inline mr-1"></lucide-angular>
            Edit
          </button>
          <button
            (click)="onDeleteRole(role)"
            [disabled]="role.isDefaultRole"
            [class.opacity-50]="role.isDefaultRole"
            [class.cursor-not-allowed]="role.isDefaultRole"
            class="flex-1 px-3 py-2 text-sm font-medium text-[var(--color-error)] hover:bg-[var(--color-error)]/10 rounded-lg transition-colors disabled:hover:bg-transparent"
          >
            <lucide-angular [img]="Trash2" class="h-4 w-4 inline mr-1"></lucide-angular>
            Delete
          </button>
        </div>
      </div>
    </app-card>
  </div>

  <!-- Empty State -->
  <div *ngIf="roles.length === 0 && !isLoading" class="text-center py-12">
    <lucide-angular [img]="Shield" class="h-12 w-12 mx-auto text-[var(--color-text-muted)] mb-4"></lucide-angular>
    <p class="text-[var(--color-text-muted)]">No roles found</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-12">
    <p class="text-[var(--color-text-muted)]">Loading roles...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4">
    {{ errorMessage }}
  </div>
</div>

<!-- Role Form Modal -->
<app-role-form-modal
  [isOpen]="showRoleModal"
  [role]="selectedRole"
  [mode]="roleModalMode"
  (closed)="showRoleModal = false"
  (saved)="onRoleSaved()"
/>

<!-- Delete Confirmation -->
<app-confirm-dialog
  [isOpen]="showDeleteConfirm"
  title="Delete Role"
  [message]="'Are you sure you want to delete ' + (selectedRole?.name || 'this role') + '?'"
  confirmText="Delete"
  confirmColor="error"
  (confirmed)="confirmDelete()"
  (cancelled)="showDeleteConfirm = false"
/>
