<div class="min-h-screen bg-white">
  <!-- Header -->
  <div class="bg-[#D4B896] px-8 py-4">
    <div class="flex items-center space-x-3">
      <button 
        (click)="onBack()"
        class="text-gray-800 hover:text-gray-900 transition-colors">
        <lucide-angular [img]="ArrowLeft" class="w-5 h-5"></lucide-angular>
      </button>
      <h1 class="text-xl font-normal text-gray-900">
        {{ item?.caliber }}
      </h1>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex justify-center items-center py-20">
    <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"></div>
  </div>

  <!-- Content -->
  <div *ngIf="!loading && item" class="px-8 py-6">
    <!-- Tabs -->
    <div class="border-b border-gray-300 mb-8">
      <nav class="flex space-x-8">
        <button
          (click)="setActiveTab('overview')"
          [class.border-gray-800]="activeTab === 'overview'"
          [class.text-gray-900]="activeTab === 'overview'"
          [class.border-transparent]="activeTab !== 'overview'"
          [class.text-gray-400]="activeTab !== 'overview'"
          class="py-3 px-1 border-b-2 font-normal text-base transition-colors hover:text-gray-700">
          Overview
        </button>
        <button
          (click)="setActiveTab('stock')"
          [class.border-gray-800]="activeTab === 'stock'"
          [class.text-gray-900]="activeTab === 'stock'"
          [class.border-transparent]="activeTab !== 'stock'"
          [class.text-gray-400]="activeTab !== 'stock'"
          class="py-3 px-1 border-b-2 font-normal text-base transition-colors hover:text-gray-700">
          Stock
        </button>
        <button
          (click)="setActiveTab('orders')"
          [class.border-gray-800]="activeTab === 'orders'"
          [class.text-gray-900]="activeTab === 'orders'"
          [class.border-transparent]="activeTab !== 'orders'"
          [class.text-gray-400]="activeTab !== 'orders'"
          class="py-3 px-1 border-b-2 font-normal text-base transition-colors hover:text-gray-700">
          Orders
        </button>
        <button
          (click)="setActiveTab('supplier')"
          [class.border-gray-800]="activeTab === 'supplier'"
          [class.text-gray-900]="activeTab === 'supplier'"
          [class.border-transparent]="activeTab !== 'supplier'"
          [class.text-gray-400]="activeTab !== 'supplier'"
          class="py-3 px-1 border-b-2 font-normal text-base transition-colors hover:text-gray-700">
          Supplier
        </button>
      </nav>
    </div>

    <!-- Overview Tab -->
    <div *ngIf="activeTab === 'overview'">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- Left Column: Details -->
        <div>
          <h2 class="text-base font-semibold text-gray-800 mb-4">Primary Details</h2>
          <div class="space-y-3">
            <div>
              <p class="text-xs text-gray-500 mb-1">Product name</p>
              <p class="text-sm text-gray-900">{{ item.caliber }}</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Product ID</p>
              <p class="text-sm text-gray-900">456567</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">NCN</p>
              <p class="text-sm text-gray-900">{{ item.nature }}</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Primary Purpose</p>
              <p class="text-sm text-gray-900">Anti-Personnel</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Projectile Color</p>
              <p class="text-sm text-gray-900">No Color - Plain</p>
            </div>
          </div>

          <h2 class="text-base font-semibold text-gray-800 mb-4 mt-8">Caliber Specifications</h2>
          <div class="space-y-3">
            <div>
              <p class="text-xs text-gray-500 mb-1">Total Weight</p>
              <p class="text-sm text-gray-900">11.7 - 0.8 gram</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Projectile Material</p>
              <p class="text-sm text-gray-900">Copper Alloy #220, Lead Antimony Alloy</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Case Type</p>
              <p class="text-sm text-gray-900">Rimless</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Primer</p>
              <p class="text-sm text-gray-900">Non-corrosive Type</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Propellant</p>
              <p class="text-sm text-gray-900">WC-844 (smokeless, Double Base or Equivalent)</p>
            </div>
          </div>

          <h2 class="text-base font-semibold text-gray-800 mb-4 mt-8">Classifications</h2>
          <div class="space-y-3">
            <div>
              <p class="text-xs text-gray-500 mb-1">Hazard Division</p>
              <p class="text-sm text-gray-900">1.4 s</p>
            </div>

            <div>
              <p class="text-xs text-gray-500 mb-1">Capability Group</p>
              <p class="text-sm text-gray-900">G</p>
            </div>
          </div>
        </div>

        <!-- Right Column: Image -->
        <div class="flex items-start justify-center pt-8">
          <div class="w-full max-w-sm">
            <img 
              src="/assets/image 8.png" 
              alt="Ammunition" 
              class="w-full h-auto object-contain">
          </div>
        </div>
      </div>
    </div>

    <!-- Stock Tab -->
    <div *ngIf="activeTab === 'stock'">
      <div class="flex items-center justify-center mb-8">
        <img 
          src="/assets/image 8.png" 
          alt="Ammunition" 
          class="h-40 object-contain">
      </div>

      <div class="bg-white rounded-lg overflow-hidden shadow-sm border border-gray-200">
        <table class="min-w-full">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Lot
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Total Quantity
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Utilization
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Available Inventory
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Status
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Expiry Date
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            <tr *ngFor="let lot of stockLots" class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                {{ lot.lotNumber }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ formatNumber(lot.totalQuantity) }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ lot.utilization }}%
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ formatNumber(lot.availableInventory) }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span [class]="getLotStatusClass(lot.status)" class="px-3 py-1 inline-flex text-xs font-medium rounded-full">
                  {{ lot.status }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ formatDate(lot.expiryDate) }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="flex justify-center mt-8">
        <button class="px-8 py-2.5 bg-[#D4B896] text-gray-800 rounded-md hover:bg-[#C4A886] transition-colors font-normal text-sm">
          Map View
        </button>
      </div>
    </div>

    <!-- Orders Tab -->
    <div *ngIf="activeTab === 'orders'">
      <div class="bg-white rounded-lg overflow-hidden shadow-sm border border-gray-200">
        <table class="min-w-full">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Issue No.
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Request Type
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Quantity
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Priority
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Request Date
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Status
              </th>
              <th class="px-6 py-3 text-right text-xs font-medium text-gray-600 uppercase tracking-wide">
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            <tr *ngFor="let order of paginatedOrders" class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                {{ order.issueNo }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ order.requestType }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ formatNumber(order.quantity) }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span [class]="getPriorityClass(order.priority)" class="px-3 py-1 inline-flex text-xs font-medium rounded-full">
                  {{ order.priority }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ formatDate(order.requestDate) }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span [class]="getStatusClass(order.status)" class="px-3 py-1 inline-flex text-xs font-medium rounded-full">
                  {{ order.status }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm">
                <button class="w-8 h-8 rounded-full border-2 border-gray-300 flex items-center justify-center hover:border-gray-400 hover:bg-gray-50 transition-colors ml-auto">
                  <svg class="w-4 h-4 text-gray-600" fill="currentColor" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="1.5"/>
                    <circle cx="12" cy="6" r="1.5"/>
                    <circle cx="12" cy="18" r="1.5"/>
                  </svg>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="flex justify-center items-center space-x-1 mt-8">
        <button 
          (click)="onOrdersPageChange(currentOrdersPage - 1)"
          [disabled]="currentOrdersPage === 1"
          class="px-2 py-1 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30 disabled:cursor-not-allowed transition-colors">
          &lt;
        </button>
        
        <button
          *ngFor="let page of getOrdersPageNumbers()"
          (click)="onOrdersPageChange(page)"
          [class.bg-blue-600]="currentOrdersPage === page"
          [class.text-white]="currentOrdersPage === page"
          [class.text-gray-700]="currentOrdersPage !== page"
          [class.hover:bg-gray-100]="currentOrdersPage !== page"
          class="w-8 h-8 rounded flex items-center justify-center text-sm transition-colors">
          {{ page }}
        </button>

        <button 
          (click)="onOrdersPageChange(currentOrdersPage + 1)"
          [disabled]="currentOrdersPage === totalOrdersPages"
          class="px-2 py-1 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30 disabled:cursor-not-allowed transition-colors">
          &gt;
        </button>
      </div>
    </div>

    <!-- Supplier Tab -->
    <div *ngIf="activeTab === 'supplier'">
      <div class="bg-white rounded-lg overflow-hidden shadow-sm border border-gray-200">
        <table class="min-w-full">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Supplier Name
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                NCAGE
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Country
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Lead Time
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wide">
                Contact
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            <tr *ngFor="let supplier of suppliers" class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                {{ supplier.name }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ supplier.ncage }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ supplier.country }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ supplier.leadTime }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:text-blue-700">
                {{ supplier.contact }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

